// DOMContentLoaded para asegurar que el DOM está cargado
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('userForm');
    const feedback = document.getElementById('feedback');
    const saludo = document.getElementById('saludo');
    const infoBtn = document.getElementById('infoBtn');
    const userData = document.getElementById('userData');

    // Al cargar, recuperar el nombre guardado en Local Storage (si existe)
    const storedName = localStorage.getItem('nombreUsuario');
    if (storedName) {
        saludo.textContent = `¡Bienvenido de nuevo, ${storedName}!`;
    } else {
        saludo.textContent = 'Por favor, registra tus datos en el formulario.';
    }

    // Evento de envío del formulario
    form.addEventListener('submit', function(event) {
        event.preventDefault();

        // Validación nativa
        if (!form.checkValidity()) {
            feedback.textContent = 'Por favor completa correctamente todos los campos requeridos.';
            feedback.style.color = "#d90429";
            form.reportValidity(); // Muestra mensajes nativos
            return;
        }

        // Obtener valores
        const nombre = document.getElementById('nombre').value.trim();
        const email = document.getElementById('email').value.trim();
        const edad = document.getElementById('edad').value.trim();
        const pais = document.getElementById('pais').value;

        // Guardar datos en Local Storage
        localStorage.setItem('nombreUsuario', nombre);
        localStorage.setItem('emailUsuario', email);
        localStorage.setItem('edadUsuario', edad);
        localStorage.setItem('paisUsuario', pais);

        // Feedback visual
        feedback.textContent = '¡Datos guardados correctamente!';
        feedback.style.color = "#38b000";
        saludo.textContent = `¡Bienvenido, ${nombre}!`;

        // Limpiar el formulario después de un breve retraso
        setTimeout(() => {
            form.reset();
            feedback.textContent = '';
        }, 2000);
    });

    // Evento para mostrar la información del usuario al hacer clic en el menú Información
    infoBtn.addEventListener('click', function() {
        // Recuperar datos de Local Storage
        const nombre = localStorage.getItem('nombreUsuario') || '';
        const email = localStorage.getItem('emailUsuario') || '';
        const edad = localStorage.getItem('edadUsuario') || '';
        const pais = localStorage.getItem('paisUsuario') || '';

        if (nombre && email && edad && pais) {
            // Mostrar datos en el div userData
            userData.innerHTML = `
                <strong>Nombre:</strong> ${nombre}<br>
                <strong>Correo electrónico:</strong> ${email}<br>
                <strong>Edad:</strong> ${edad}<br>
                <strong>País:</strong> ${pais.toUpperCase()}
            `;
        } else {
            userData.innerHTML = 'No hay datos registrados. Por favor, completa el formulario.';
        }
    });
});